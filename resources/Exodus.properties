##############################################
# MariaDB Migration Assessment Configuration.
# Author: Faisal
# 01-Jan-2020
##############################################

#Connection Additional Parameters
SourceConnectParams=useUnicode=yes&characterEncoding=utf8&rewriteBatchedStatements=true&useSSL=false
SourceConnectPrefix=jdbc:mariadb://
#useUnicode=yes&characterEncoding=utf8&useSSL=false

#Paths with reference to the current folder. Do not use "/" at the end of the path
LogPath=/home/faisal/Work/Java/ExodusAssess/bin/logs
DDLPath=/home/faisal/Work/Java/ExodusAssess/bin/ddl
ReportPath=/home/faisal/Work/Java/ExodusAssess/bin/export


#Database User's to Migrate
UsersToMigrate=USER NOT LIKE 'mysql%' AND USER NOT LIKE 'root%'

#Databases to Migrate, Comma separated String values, use SQL WHERE clause compatible with the Source DB Data Dictionary Tables
DatabaseToMigrate=SCHEMA_NAME NOT IN ('mysql', 'sys', 'performance_schema', 'information_schema', 'innodb_memcache')

#Criteria to be added to the SELECT QUERY to filter down the tables for migration, use SQL WHERE clause compatible with the Source DB Data Dictionary Tables
TablesToMigrate=TABLE_NAME LIKE '%'

#String Terminator Character used in the properties below as an example define values as
## TmpStr = [ Value 1   ], Value 2  ], [   Value 3
## To reflect spaces before and after the strings
StringTerminator=[,]

#These Tables will be Skipped from Migration, use SQL WHERE clause compatible with the Source DB Data Dictionary Tables.
#The following Names should always be there, any additional tables, just add on to the list or use "AND additional expression"
SkipTableMigration=TABLE_NAME IN ('MigrationLog', 'MigrationLogDETAIL')

#Data Types to verify if exists in the MySQL Tables
DataTypesToCheck=JSON

#Functions to search for in the Source Code and Views
FunctionsToCheck=GTID_SUBSET, GTID_SUBTRACT, WAIT_FOR_EXECUTED_GTID_SET, WAIT_UNTIL_SQL_THREAD_AFTER_GTIDS, DISTANCE, MBRCOVEREDBY, ST_BUFFER_STRATEGY, ST_DISTANCE_SPHERE, ST_DISTANCE, ST_GeoHash, ST_IsValid, ST_LatFromGeoHash, ST_LongFromGeoHash, ST_PointFromGeoHash, ST_SIMPLIFY, ST_VALIDATE, RANDOM_BYTES, RELEASE_ALL_LOCKS, VALIDATE_PASSWORD_STRENGTH, VALUE ], VALUE(

#System Variables to search for in the Server Config
SystemVariablesToCheck=avoid_temporal_upgrade:OFF, binlog_error_action:ABORT_SERVER, binlog_group_commit_sync_delay:0, binlog_group_commit_sync_no_delay_count:0, binlog_gtid_simple_recovery:ON, binlog_max_flush_queue_time:0, binlog_order_commits:ON, binlog_rows_query_log_events:OFF, block_encryption_mode:aes-128-ecb, check_proxy_users:OFF, default_password_lifetime:0, disconnect_on_expired_password:ON, end_markers_in_json:OFF, enforce_gtid_consistency:OFF, gtid_executed:*, gtid_next:*, gtid_purged:*, internal_tmp_disk_storage_engine:INNODB, log_bin_use_v1_row_events:OFF, log_builtin_as_identified_by_password:OFF, log_error_verbosity:3, log_statements_unsafe_for_binlog:ON, log_throttle_queries_not_using_indexes:0, master_info_repository:FILE, max_execution_time:0, mysql_native_password_proxy_users:OFF, ngram_token_size:2, offline_mode:OFF, rbr_exec_mode:STRICT, relay_log_info_repository:FILE, require_secure_transport:OFF, rpl_stop_slave_timeout:31536000, server_id_bits:32, session_track_gtids:OFF, sha256_password_proxy_users:OFF, show_compatibility_56:OFF, show_old_temporals:OFF, slave_allow_batching:OFF, slave_checkpoint_group:512, slave_checkpoint_period:300, slave_parallel_type:DATABASE, slave_pending_jobs_size_max:16777216, slave_preserve_commit_order:OFF, super_read_only:OFF, transaction_allow_batching:OFF, transaction_write_set_extraction:OFF

#Check for CREATE TABLESPACE or other special commands that exists in MySQL and not in MariaDB
CheckCreateTableSpace=CREATE TABLESPACE

#Keywords check
CheckKeywords=OVER, ROWS, RECURSIVE

#JSON Operators
CheckJsonOperators=->, ->>

#Check for JSON_SEARCH() function
CheckJSONSearch=JSON_SEARCH

# Full Text Search Plugins Validion whihc are not supported by MariaDB !!!
CheckFullTextParserPlugin=WITH PARSER `ngram`, WITH PARSER `mecab`

#SHA256 Password Plugin
SHA256PasswordCheck=default_authentication_plugin:mysql_native_password

#InnoDB Encryption Check
EncryptionParametersToCheck=keyring_file_data:data, keyring_encrypted_file_data:data

#MySQL X Pugin to secure connections is not supported by MariaDB
#This is a key value pair, the :* represents any value any value
CheckMySQLXPlugin=mysqlx-ssl-ca:*, mysqlx-ssl-cert:*, mysqlx-ssl-key:*

#MySQL Native InnoDB Partitioning is not supported by MariaDB
CheckInnoDBPArtitions=PARTITION BY
CheckInnoDBPArtitions.AND=ENGINE=InnoDB

#Check the timeout parameters in the SELECT statements (Views/Stored Procedures/Functions)
CheckMaxStatementSourceCode=MAX_STATEMENT_TIME, MAX_EXECUTION_TIME

#Check the timeout parameters in the server configurations, only applicable to MySQL 5.7.7 and older
CheckMaxStatementServerVariables=MAX_STATEMENT_TIME:*

#Checks for the Memcached Plugin and identifies the list of tables using it. "?" will be replaced by the schema name within the code
CheckMemCachedPlugin=SELECT Concat("`", db_schema, "`.`", db_table, "`") AS resultSet FROM innodb_memcache.containers WHERE db_schema=?